{% macro listItems(type, items) %}
    <div class="row">
    {% for item in items%}
        <p>
        <small>{{ item['date'] }}: {{ item['office'] }}</small><br/>
            <td><a href="/{{ type }}/{{ item['_id'] }}">{{
                    item['overview'] }}</a>
        </p>
    {% endfor %}
    </div>
{% endmacro %}

{% macro listUpdates(updates, source, source_id, user_id, has_right, date,
    operator=False) %}
        <ul>
            {% for update in updates %}
                <li>
                    {{ update['date'] }}: {{ update['detail'] | safe }}
                    {% if has_right %}
                    <small>({{ update['user_name'] }})</small>
                    {% endif %}
                    {% if operator %}
                            <form action="/updates/{{ update['_id'] }}/delete"
                            method="post">
                            <button class="DeleteButton">Eliminar</button>
                            </form>
                    {% endif %}
                </li>
            {% endfor %}
    </table>
    {% if has_right %}
        <form action='/updates/new/' method="post">
            <input type="hidden" name="source" value="{{ source }}">
            <input type="hidden" name="source_id" value="{{ source_id }}">
            <input class="Inline" 
                   type="date" 
                   size="8" 
                   name="date" 
                   value="{{ date }}">
            <textarea class="Inline" name="detail" cols="60" rows="5" 
    		    placeholder="Detalle"></textarea>
    		<input type="hidden" name="user_id" value="{{ user_id }}">
            <button>Actualizar</button>
        </form>
    {% endif %}
{% endmacro %}

{% macro listDocs(docrels, source, source_id, prefix, has_right, date) %}
    <ul>
        {% for dr in docrels %}
        <li>{{ dr['date'] }}: <a href="/docs/{{ dr['_id'] }}">{{ dr['title'] }}</a></li>
        {% endfor %}
    </ul>
    {% if has_right %}
    <p><strong>Agregar nuevo documento:</strong></p>
    <form action="/docrels/newdoc/" method="post" enctype="multipart/form-data">
        <input class="Inline" type="date" size="8" name="date" 
               value="{{ date }}">
        <input class="Inline" name="title" size="60" 
               placeholder="Título del documento. Ej. Peticion." required>
        <input class="Inline" name="file" type="file" required>
        <p>Nombre el archivo con el siguiente esquema:
        entidad-titulo-tipo-año.<br/>
        Por ejemplo bcr-existencia-colones-apelacion-2016.pdf</p>
        <input type="hidden" name="prefix" value="{{ prefix }}">
        <input type="hidden" name="source" value="{{ source }}">
        <input type="hidden" name="source_id" value="{{ source_id }}">
        <button>Enviar</button>
    </form>
    <p><strong>Agregar documento existente:</strong></p>
    <form action="/docrels/new/" method="post">
        <input size="60" name="doc_id" placeholder="URL del documento" required>
        <input type="hidden" name="source" value="{{ source }}">
        <input type="hidden" name="source_id" value="{{ source_id }}">
        <button>Enviar</button>
    </form>
    {% endif %}
{% endmacro %} 
